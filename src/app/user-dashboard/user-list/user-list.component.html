<main>
  <app-header></app-header>

  <div class="main-container">
    <div>
      <app-sidebar></app-sidebar>
    </div>
    <div>
      <div
        style="
          display: flex;
          justify-content: space-around;
          flex-wrap: wrap;
          align-items: center;
          background-color: aquamarine;
        "
        class="f-w"
      >
        <div class="search">
          <div class="search-box">
            <div class="search-field">
              <input
                placeholder="Search..."
                class="input"
                type="text"
                [(ngModel)]="searchQuery"
                (input)="applyFilter()"
              />
              <div class="search-box-icon">
                <button class="btn-icon-content" matTooltip="Filter Data">
                  <i
                    class="fa fa-filter"
                    style="font-size: 24px; color: rgb(255, 255, 255)"
                  ></i>
                </button>
              </div>
            </div>
          </div>
        </div>
        <h3
          *ngIf="
            userData !== undefined && userData.length == 0
              ? '0'
              : userData.length
          "
          [@counter]="animationState"
          style="padding-top: 20px; font-weight: 500"
          matTooltip="Show Total User"
        >
          Total User: {{ userData.length }}
        </h3>

        <img
          src="../../../assets/image/PDF_icon.png"
          alt="PDF Icon"
          style="margin-right: 10px; width: 38px; height: 44px; cursor: pointer"
          (click)="generatePDF()"
          matTooltip="Generate PDF"
        />
      </div>
      <!-- 
      <button (click)="printTable()">Print Table</button> -->
      <!-- User Data Table -->
      <div class="table-container" id="myTableElementId">
        <table class="table" *ngIf="userData !== null" #userList>
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Mobile</th>
              <th>Edit</th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody *ngFor="let user of userData; let index = index">
            <tr>
              <td class="text-break">{{ incrementalId + index }}</td>
              <td class="text-break">{{ user.userName }}</td>
              <td class="text-break">{{ user.userEmail }}</td>
              <td class="text-break">{{ user.userMobile }}</td>
              <td>
                <mat-icon
                  style="color: #0000ff"
                  (click)="
                    updateUser(user._id, {
                      userName: user.updatedUserName,
                      userEmail: user.updatedUserEmail
                    })
                  "
                  (click)="editUser(user)"
                  matTooltip="Update User Data"
                  >edit</mat-icon
                >
              </td>
              <td>
                <mat-icon
                  style="color: #ff0000"
                  (click)="deleteUser(user._id)"
                  matTooltip="Delete User Data"
                  >delete</mat-icon
                >
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>
<app-loader *ngIf="showLoader"></app-loader>
